# Search-R1 环境配置文件
# 复制此文件为 .env 并根据需要修改配置

# ========================================
# 模型配置
# ========================================

# 模型路径（HuggingFace 模型名或本地路径）
BASE_MODEL=Qwen/Qwen3-0.6B
# BASE_MODEL=../models/Qwen3-0.6B  # 使用本地模型

# 实验名称
EXPERIMENT_NAME=search-r1-qwen3-0.6b-demo

# WandB 项目名称
WANDB_PROJECT=Search-R1-Demo

# WandB 模式 (online/offline/disabled)
WANDB_MODE=offline

# WandB API Key（如果使用 online 模式）
# WANDB_API_KEY=your_wandb_api_key_here

# ========================================
# 训练配置
# ========================================

# 使用的 GPU（逗号分隔）
CUDA_VISIBLE_DEVICES=0

# GPU 数量
N_GPUS=1

# 训练批次大小
TRAIN_BATCH_SIZE=32

# 验证批次大小
VAL_BATCH_SIZE=16

# PPO mini batch size
PPO_MINI_BATCH_SIZE=16

# PPO micro batch size
PPO_MICRO_BATCH_SIZE=4

# 学习率
LEARNING_RATE=5e-6

# 总训练步数
TOTAL_TRAINING_STEPS=100

# 总训练 epochs
TOTAL_EPOCHS=5

# ========================================
# 数据配置
# ========================================

# 训练数据路径
TRAIN_DATA=../data/sample_train.jsonl

# 测试数据路径
TEST_DATA=../data/sample_train.jsonl

# 语料库路径
CORPUS_FILE=../data/sample_corpus.jsonl

# ========================================
# 检索配置
# ========================================

# 检索服务器 URL
RETRIEVER_URL=http://127.0.0.1:8000/retrieve

# 检索服务器端口
RETRIEVER_PORT=8000

# 检索 TopK
RETRIEVER_TOPK=3

# 检索器类型（bm25/dense/api）
RETRIEVER_NAME=bm25

# 索引路径
INDEX_PATH=../indexes/bm25

# ========================================
# 内存和性能配置
# ========================================

# GPU 内存利用率（0.0-1.0）
GPU_MEMORY_UTILIZATION=0.5

# 最大提示长度
MAX_PROMPT_LENGTH=2048

# 最大响应长度
MAX_RESPONSE_LENGTH=256

# 最大起始长度
MAX_START_LENGTH=1024

# 最大观察长度
MAX_OBS_LENGTH=256

# ========================================
# 高级配置
# ========================================

# 使用梯度检查点（节省内存）
ENABLE_GRADIENT_CHECKPOINTING=true

# FSDP 参数 offload
FSDP_PARAM_OFFLOAD=false

# FSDP 梯度 offload
FSDP_GRAD_OFFLOAD=false

# FSDP 优化器 offload
FSDP_OPTIMIZER_OFFLOAD=false

# vLLM 注意力后端（XFORMERS/FLASH_ATTN）
VLLM_ATTENTION_BACKEND=XFORMERS

# KL 损失系数
KL_LOSS_COEF=0.001

# 温度参数
TEMPERATURE=0.8

# Agent 数量
N_AGENT=3

# 最大轮次
MAX_TURNS=2

# ========================================
# 检查点配置
# ========================================

# 检查点保存频率（步数）
SAVE_FREQ=50

# 测试频率（步数）
TEST_FREQ=25

# 检查点保存目录
CHECKPOINT_DIR=../checkpoints

# ========================================
# 日志配置
# ========================================

# 日志目录
LOG_DIR=../logs

# 是否在训练前验证
VAL_BEFORE_TRAIN=true

# ========================================
# 在线搜索 API 配置（可选）
# ========================================

# Google Search API Key
# GOOGLE_API_KEY=your_google_api_key

# Google Search Engine ID
# GOOGLE_SEARCH_ENGINE_ID=your_search_engine_id

# Bing Search API Key
# BING_API_KEY=your_bing_api_key

# Brave Search API Key
# BRAVE_API_KEY=your_brave_api_key
